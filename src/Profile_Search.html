<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My Profile</title>
  <link rel="stylesheet" href="css/cssreset.css">
  <link rel="stylesheet" href="css/profile_search.css">

  <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-firestore.js"></script>

  <!-- GitHub Fetch API -->
  <script src="./js/fetch.umd.js"></script>

  <script>
    // Initialize Cloud Firestore through Firebase
    firebase.initializeApp({
      apiKey: "AIzaSyC6FPXu3_bOHpHr7AelgBKAMbGiIUPZ2Vo",
      authDomain: "pandaexpressjs.firebaseapp.com",
      projectId: "pandaexpressjs"
    });

    var db = firebase.firestore();

    window.onload = function () {
      fetch('/profile')
        .then(res => res.json())
        .then(function (data) {
          if (data) {
            console.log("User logged in. UID: ", data);
            db.collection("users").doc(data)
              .onSnapshot(function (doc) {
                document.getElementById('span-alias').innerHTML = doc.data().alias;
                document.getElementById('span-name').innerHTML = doc.data().name;
                document.getElementById('span-ig').innerHTML = doc.data().ig;
                document.getElementById('span-email').innerHTML = doc.data().email;
                document.getElementById('span-portfolio').innerHTML = doc.data().portfolio;
              });
          }
        }).catch(function (error) {
          console.log("Request failed", error)
        })
    };
  </script>
</head>

<body>
  <div class="screen_container">

    <!-- <div class="header_container">
      <a id="back-button" href="Prompt.html">BACK</a>
      <div id="header-title">
        <header>USER SEARCH</header>
      </div>
    </div> -->

    <div class="top_container">
      <a id="back-button" href="Search.html">BACK</a>
      <div class="header_container">
        <div class="blur-box"></div>
        <header id="header-title">USER SEARCH</header>
      </div>
    </div>

    <div class="main_container">
      <div class="text_container">
          <text id="sub-header"><span id="span-name">Martin Magsombol</span></text>
          <text id="info-text"><span id="span-alias">re.mags</span></text>
          <text id="info-text"><span id="span-ig">@re.mags</span></text>
          <text id="info-text"><span id="span-email">tacticalmango@live.com</span></text>
          <text id="info-text"><span id="span-portfolio">NA</span></text>
        </div>
    </div>

    <div class="work_container">

      <!-- n submissions -->

      <div id="submission">
        <Text>Spirituality</Text>
        <div class="image_container">
          <img src="https://jeffcarreira.com/wp-content/uploads/2017/11/what-is-spirituality.jpg">
          </img>
        </div>
      </div>

      <div id="submission">
        <Text>Portraits</Text>
        <div class="image_container">
            <img src="https://www.howtogeek.com/wp-content/uploads/2016/11/dani.jpg.pagespeed.ce.5MoNNrVjxO.jpg">
            </img>
        </div>
      </div>

      <div id="submission">
        <Text>Food & Drink</Text>
        <div class="image_container">
          <img src="https://www.steigenberger.com/cache/images/022_SHR_mnchen_resta_b505a027250022d5ad887f6-1-1-1-1.jpg">
          </img>
        </div>
        <Text>#First-Place</Text>
      </div>

    </div>

    <footer class="footer_container">
      <a class="footer_button" href="Search.html">SEARCH</a>
      <a class="footer_button" href="Discover.html">DISCOVER</a>
      <a class="footer_button" href="Profile.html">MY PROFILE</a>
    </footer>

</html>

</html>
