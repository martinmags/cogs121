<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Community Feed</title>
  <link rel="stylesheet" href="css/cssreset.css">
  <link rel="stylesheet" href="css/discover.css">
</head>

<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-firestore.js"></script>

<script src="./js/fetch.umd.js"></script>

<script>
  // Initialize Cloud Firestore through Firebase
  firebase.initializeApp({
    apiKey: "AIzaSyC6FPXu3_bOHpHr7AelgBKAMbGiIUPZ2Vo",
    authDomain: "pandaexpressjs.firebaseapp.com",
    projectId: "pandaexpressjs"
  });

  var db = firebase.firestore();

  window.onload = function () {
    db.collection("prompts").where("status", "==", "thisweek").get().then((querySnapshot) => {
      let tgtContainer = document.querySelector(".prompts_container > .row_container");
      querySnapshot.forEach((doc) => {
        tgtContainer.innerHTML += `
          <div class="col_container">
            <form action="/select-prompt" method="POST">
              <input type="hidden" id="pid" name="promptId" value="${doc.id}"/>
              <input type="image" src="${doc.data()["coverUrl"]}" class="prompt" alt="prompt" />
            </form>
            <text class="txt">${doc.data()["title"]}</text>
          </div>
        `
      })
    })
  }
</script>

<body>
  <div class="screen_container">

    <div class="header_container">
      <header id="title">XPOSURE</header>
    </div>

    <div class="prompts_header_container">
      <text id="prompts-header">Current Prompts
        <span id="time-txt">x hours left</span>
      </text>
    </div>

    <div class="prompts_container">
      <div class="row_container">
      </div>
    </div>

    <div class="sub_header_container">
      <text id="showcase-header">Previous Prompts Showcase</text>
    </div>

    <div class="showcase_container">
      <div class="showcase">
        <div class="row_container">
          <img id="winner1" src="https://foodrevolution.org/wp-content/uploads/2018/04/blog-featured-diabetes-20180406-1330.jpg"></img>
          <div class="col_container">
            <img id="winner2" src="https://cdn.theatlantic.com/assets/media/img/mt/2019/02/GettyImages_836292392/lead_720_405.jpg?mod=1550273297"></img>
            <img id="winner3" src="https://www.usnews.com/dims4/USNEWS/ee804ef/2147483647/thumbnail/640x420/quality/85/?url=http%3A%2F%2Fcom-usnews-beam-media.s3.amazonaws.com%2F1d%2Fe3%2Fbd9d17494a3185442cc96053740d%2F180522-obesity-editorial.jpg"></img>
          </div>
        </div>
        <text class="txt">Food & Drink</text>
      </div>

      <div class="showcase">
        <div class="row_container">
          <img id="winner1" src="https://downloads.biblica.com/social-media/images/online_bible_social_share.jpg"></img>
          <div class="col_container">
            <img id="winner2" src="https://s2982.pcdn.co/wp-content/uploads/2017/07/ritual-meditation-mindfulness-feature-470x248.png"></img>
            <img id="winner3" src="https://media.pagefly.io/file/get/incensejpg-1536005806846.jpg"></img>
          </div>
        </div>
        <text class="txt">Spirituality</text>
      </div>

      <div class="showcase">
        <div class="row_container">
          <img id="winner1" src="https://cdn.pariscityvision.com/media/catalog/product/cache/1/image/755x433/9df78eab33525d08d6e5fb8d27136e95/c/i/cit-01-eiffel-tower-sunset_1.jpg"></img>
          <div class="col_container">
            <img id="winner2" src="https://www.chinadiscovery.com/assets/images/shanghai/bund/huangpu-river-cruise.jpg"></img>
            <img id="winner3" src="https://bucketrediseno.s3.amazonaws.com/uploads/article/parallax_en/216/optimizada_puerto-vallarta-airport.jpg"></img>
          </div>
        </div>
        <text class="txt">Travel</text>
      </div>
    </div>

    <footer class="footer_container">
      <a class="footer_button" href="Search.html">SEARCH</a>
      <a class="footer_button" href="Discover.html">DISCOVER</a>
      <a class="footer_button" href="Profile.html">MY PROFILE</a>
    </footer>

  </div>

</body>

</html>

</html>
