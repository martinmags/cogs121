<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Xposure</title>
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="css/submission.css" />
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

  <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>

  <!-- GitHub Fetch API -->
  <script src="./js/fetch.umd.js"></script>

  <script>
    // Initialize Cloud Firestore through Firebase
    firebase.initializeApp({
      apiKey: "AIzaSyC6FPXu3_bOHpHr7AelgBKAMbGiIUPZ2Vo",
      authDomain: "pandaexpressjs.firebaseapp.com",
      projectId: "pandaexpressjs"
    });

    window.onload = function () {
      fetch('/profile')
        .then(res => res.json())
        .then(function (data) {
          if (data) {
            console.log("User logged in. UID: ", data);
            document.getElementById('uid').value = data;
          }
        }).catch(function (error) {
          console.log("Request failed", error)
        })
    };
  </script>
</head>

<body>
  <div class="screen_container">
    <div><text id="title">Submission</text></div>
    <div class="text_container">
      <div class="text_bar">
        <p class="centered-details">
          You can submit an entry, but to be qualified for the weekly showcase, you need to evaluate at least one other
          user in the same prompt. Open up your perspectives and see how others interpret the same prompt.
        </p>
        <p class="centered-details">
          *One entry per prompt.
        </p>
      </div>
    </div>
    <br />
    <!-- <div id="input-container">
      <div>
        <text class="topic">Title:</text>
        <input type="text" name="fname"><br>
      </div>
      <br />
      <div>
        <text class="topic">Files(jpeg):</text>
        <button class="button" style="width:100px">Upload</button>
      </div>
      <div>
        <text class="topic">Description(optional)</text>
        <textarea rows="3" cols="30"></textarea>
      </div>
    </div>
    <br />
    <br />
    <a href="PromptsScreen.html">
      <button class="button">Submit</button>
    </a> -->

    <form method="POST" action="/submit-form" enctype="multipart/form-data">
      <div id="input-container">
        <input type="hidden" id="uid" name="uid" />
        <div>
          <text class="topic">Title:</text>
          <input type="text" name="title"><br>
        </div>
        <div>
          <text class="topic">Files(jpeg):</text>
          <input type="file" name="document" />
        </div>
        <div>
          <text class="topic">Description(optional)</text>
          <textarea name="desc" rows="3" cols="30"></textarea>
        </div>
      </div>
      <input type="submit" class="button" value="Submit" />
    </form>
  </div>
</body>

</html>